
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Executa lint-staged para arquivos staged
if [ -f lint-staged.config.js ]; then
	npx lint-staged
	if [ $? -ne 0 ]; then
		echo "\033[0;31m[ERRO] Lint-staged falhou. Corrija os problemas antes de commitar.\033[0m"
		exit 1
	fi
fi

# Executa lint global
npm run lint
if [ $? -ne 0 ]; then
	echo "\033[0;31m[ERRO] Lint global falhou. Corrija os problemas antes de commitar.\033[0m"
	exit 1
fi

# Executa testes
npm run test
if [ $? -ne 0 ]; then
	echo "\033[0;31m[ERRO] Testes falharam. Corrija os problemas antes de commitar.\033[0m"
	exit 1
fi
